<!DOCTYPE html>
<html>
  <head>
  <title>Modern Classic Digital Settings</title>
  <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  <script src='js/slate.min.js'></script>
  <style>
  .title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  </style>
  </head>

  <body>
    <h1 class='title'>Modern Classic Digital Settings</h1>

    <div class='item-container'>
      <div class='item-container-content'>
        <div class='item'>
          Set options or the Modern Classic Digital watchface.
        </div>
      </div>
    </div>

    <div class='item-container'>
      <div class='item-container-header'>Appearance: colors</div>
      <div class='item-container-content'>
        <label class='item'>
          elapsedOuterColor
          <input id='elapsedOuterColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        <label class='item'>
          elapsedOuterBackground
          <input id='elapsedOuterBackground_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        <label class='item'>
          elapsedInnerColor
          <input id='elapsedInnerColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        <label class='item'>
          elapsedInnerBackground
          <input id='elapsedInnerBackground_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        <label class='item'>
          innermostBackgroundColor
          <input id='innermostBackgroundColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        
	<label class='item'>
	  outerCircleOuterInset
	  <input type='range' class='item-slider' name='outerCircleOuterInset_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='outerCircleOuterInset' value='50'>
	  </div>
	</label>
	<label class='item'>
	  outerCircleInnerInset
	  <input type='range' class='item-slider' name='outerCircleInnerInset_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='outerCircleInnerInset' value='50'>
	  </div>
	</label>
	<label class='item'>
	  innerCircleOuterInset
	  <input type='range' class='item-slider' name='innerCircleOuterInset_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='innerCircleOuterInset' value='50'>
	  </div>
	</label>
	<label class='item'>
	  innerCircleInnerInset
	  <input type='range' class='item-slider' name='innerCircleInnerInset_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='innerCircleInnerInset' value='50'>
	  </div>
	</label>
	<label class='item'>
	  hourHandInset
	  <input type='range' class='item-slider' name='hourHandInset_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='hourHandInset' value='50'>
	  </div>
	</label>
      </div>
      <div class='item-container-footer'>
        Choose the app's background color. Used if High Contrast Mode is not selected. Note: Only available on Basalt watches that support many colors.
      </div>
    </div>

    <div class='item-container'>
      <div class='item-container-header'>Appearance: colors</div>
      <div class='item-container-content'>
        <label class='item'>
          hourHandColor
          <input id='hourHandColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        
	<label class='item'>
	  <input type='range' class='item-slider' name='hourHandWidth_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='hourHandWidth' value='50'>
	  </div>
	</label>
        
        <label class='item'>
          minuteHandColor
          <input id='minuteHandColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
        
	<label class='item'>
	  <input type='range' class='item-slider' name='minuteHandWidth_slider' value='50'>
	  <div class='item-input-wrapper item-slider-text'>
	    <input type='text' class='item-input' name='minuteHandWidth' value='50'>
	  </div>
	</label>

        <label class='item'>
          innermostBackgroundColor
          <input id='innermostBackgroundColor_picker' type='text' class='item-color item-color-sunny' value='#000000'>
        </label>
      </div>
      <div class='item-container-footer'>
        Choose the app's background color. Used if High Contrast Mode is not selected. Note: Only available on Basalt watches that support many colors.
      </div>
    </div>
    
    <div class='item-container'>
      <div class='item-container-header'>Accessibility</div>
      <div class='item-container-content'>
        <label class='item'>
          High Contrast Mode
          <input id='high_contrast_checkbox' type='checkbox' class='item-toggle'>
        </label>
      </div>
      <div class='item-container-footer'>
        This switches the app colors to a higher contrast set that promotes readability in low light.
      </div>
    </div>

    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SAVE'>
      </div>
    </div>
  </body>
  <script>
	function getConfigData()
	{
		var backgroundColorPicker = document.getElementById('background_color_picker');
		var highContrastCheckbox = document.getElementById('high_contrast_checkbox');

		var options = {
		'background_color': backgroundColorPicker.value,
		'high_contrast': highContrastCheckbox.checked
		};

		// Save for next launch
		localStorage['background_color'] = options['background_color'];
		localStorage['high_contrast'] = options['high_contrast'];

		console.log('Got options: ' + JSON.stringify(options));
		return options;
	}

	function getQueryParam(variable, defaultValue)
	{
		var query = location.search.substring(1);
		var vars = query.split('&');
		for (var i = 0; i < vars.length; i++)
		{
			var pair = vars[i].split('=');
			if (pair[0] === variable)
			{
				return decodeURIComponent(pair[1]);
			}
		}
		return defaultValue || false;
	}

	var submitButton = document.getElementById('submit_button');
	submitButton.addEventListener('click', function()
	{
		console.log('Submit');

		// Set the return URL depending on the runtime environment
		var return_to = getQueryParam('return_to', 'pebblejs://close#');
		document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
	});

	(function()
	{
		var backgroundColorPicker = document.getElementById('background_color_picker');
		var highContrastCheckbox = document.getElementById('high_contrast_checkbox');

		// Load any previously saved configuration, if available
		if(localStorage['high_contrast'])
		{
			highContrastCheckbox.checked = JSON.parse(localStorage['high_contrast']);
			backgroundColorPicker.value = localStorage['background_color'];
		}
	})();
  </script>
</html>
